(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3808],{4381:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]])},14334:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("paperclip",[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]])},19901:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},22074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},23989:(e,t,s)=>{"use strict";function a(e,[t,s]){return Math.min(s,Math.max(t,e))}s.d(t,{q:()=>a})},25285:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},30095:(e,t,s)=>{"use strict";s.d(t,{$:()=>d,F:()=>i});var a=s(66384),r=s(77180),l=s(16636),n=s(35515);let i=l.forwardRef((e,t)=>{let{className:s,children:l,...i}=e;return(0,a.jsxs)(r.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",s),...i,children:[(0,a.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(d,{}),(0,a.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let d=l.forwardRef((e,t)=>{let{className:s,orientation:l="vertical",...i}=e;return(0,a.jsx)(r.VM,{ref:t,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 border-t border-t-transparent p-[1px]",s),...i,children:(0,a.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=r.VM.displayName},30499:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},31238:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},39281:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return r}});let a=s(16636);function r(e,t){let s=(0,a.useRef)(null),r=(0,a.useRef)(null);return(0,a.useCallback)(a=>{if(null===a){let e=s.current;e&&(s.current=null,e());let t=r.current;t&&(r.current=null,t())}else e&&(s.current=l(e,a)),t&&(r.current=l(t,a))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},46276:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>x,L3:()=>f,c7:()=>h,lG:()=>d,rr:()=>p,zM:()=>c});var a=s(66384),r=s(12276),l=s(59101),n=s(16636),i=s(35515);let d=r.bL,c=r.l9,o=r.ZL;r.bm;let u=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...l})});u.displayName=r.hJ.displayName;let m=n.forwardRef((e,t)=>{let{className:s,children:n,...d}=e;return(0,a.jsxs)(o,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(r.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...d,children:[n,(0,a.jsxs)(r.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=r.UC.displayName;let h=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};h.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let f=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",s),...l})});f.displayName=r.hE.displayName;let p=n.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});p.displayName=r.VY.displayName},48678:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]])},49284:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},50222:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},51797:(e,t,s)=>{"use strict";s.d(t,{TooltipProvider:()=>i,ZI:()=>o,k$:()=>c,m_:()=>d});var a=s(66384),r=s(19070),l=s(16636),n=s(35515);let i=r.Kq,d=r.bL,c=r.l9,o=l.forwardRef((e,t)=>{let{className:s,sideOffset:l=4,...i}=e;return(0,a.jsx)(r.UC,{ref:t,sideOffset:l,className:(0,n.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})});o.displayName=r.UC.displayName},56995:(e,t,s)=>{"use strict";s.d(t,{AM:()=>i,Wv:()=>d,hl:()=>c});var a=s(66384),r=s(34537),l=s(16636),n=s(35515);let i=r.bL,d=r.l9,c=l.forwardRef((e,t)=>{let{className:s,align:l="center",sideOffset:i=4,...d}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsx)(r.UC,{ref:t,align:l,sideOffset:i,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});c.displayName=r.UC.displayName},57083:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},59044:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},59767:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]])},64362:(e,t,s)=>{"use strict";s.d(t,{ChatPage:()=>F});var a=s(66384),r=s(55212),l=s(92944),n=s(53360),i=s(31238),d=s(30499),c=s(25285),o=s(82455),u=s(85409),m=s(57083),h=s(22074),x=s(16636),f=s(10432),p=s(30095),g=s(51797),j=s(35515),v=s(50222),y=s(19901),N=s(98530),b=s(59044),w=s(94022),k=s(98268),A=s(72309),C=s(58001),S=s(56995),M=s(14334),z=s(85963),D=s(75471),L=s(48678),I=s(59101),_=s(4381);function O(e){let{onSendMessage:t,onSendImage:s}=e,[n,i]=(0,x.useState)(""),[d,c]=(0,x.useState)(!1),[o,u]=(0,x.useState)(!1),m=(0,x.useRef)(null),h=(0,x.useRef)(null);(0,x.useEffect)(()=>{h.current&&(h.current.style.height="40px",h.current.style.height="".concat(Math.min(h.current.scrollHeight,120),"px"))},[n]);let f=()=>{n.trim()&&(t(n.trim()),i(""),h.current&&(h.current.style.height="40px"))};return(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{type:"button",size:"icon",variant:"ghost",className:"rounded-full h-9 w-9",onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},children:(0,a.jsx)(M.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:"Attach file"})]})}),(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{type:"button",size:"icon",variant:"ghost",className:"rounded-full h-9 w-9",onClick:()=>{var e;return null==(e=m.current)?void 0:e.click()},children:(0,a.jsx)(z.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:"Send image"})]})})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-2 flex-1",children:[(0,a.jsx)(l.p,{ref:h,value:n,onChange:e=>{i(e.target.value),c(e.target.value.length>0)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),f())},placeholder:"Type a message...",className:(0,j.cn)("resize-none pr-12 rounded-2xl transition-all px-5 !py-4")}),(0,a.jsx)(r.$,{type:"button",size:"icon",className:(0,j.cn)("size-9 rounded-full transition-colors",n.trim()?"":"text-muted-foreground"),disabled:!n.trim(),onClick:f,children:(0,a.jsx)(D.A,{className:"h-4 w-4 text-white"})})]}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsxs)(S.AM,{children:[(0,a.jsx)(S.Wv,{asChild:!0,children:(0,a.jsx)(r.$,{type:"button",size:"icon",variant:"ghost",className:"rounded-full h-9 w-9",children:(0,a.jsx)(L.A,{className:"h-5 w-5"})})}),(0,a.jsx)(S.hl,{className:"w-64 p-2",align:"end",children:(0,a.jsx)("div",{className:"grid grid-cols-8 gap-1",children:["\uD83D\uDE00","\uD83D\uDE03","\uD83D\uDE04","\uD83D\uDE01","\uD83D\uDE06","\uD83D\uDE05","\uD83D\uDE02","\uD83E\uDD23","\uD83D\uDE0A","\uD83D\uDE07","\uD83D\uDE42","\uD83D\uDE43","\uD83D\uDE09","\uD83D\uDE0C","\uD83D\uDE0D","\uD83E\uDD70","\uD83D\uDE18","\uD83D\uDE17","\uD83D\uDE19","\uD83D\uDE1A","\uD83D\uDC4D","\uD83D\uDC4E","\uD83D\uDC4F","\uD83D\uDE4C","\uD83D\uDC4C","✌️","\uD83E\uDD1E","\uD83E\uDD1F","\uD83E\uDD18","\uD83D\uDC4A","❤️","\uD83E\uDDE1","\uD83D\uDC9B","\uD83D\uDC9A","\uD83D\uDC99","\uD83D\uDC9C","\uD83D\uDDA4","❣️","\uD83D\uDC95","\uD83D\uDC9E"].map((e,t)=>(0,a.jsx)("button",{className:"h-8 w-8 flex items-center justify-center rounded hover:bg-muted cursor-pointer text-lg",onClick:()=>i(t=>t+e),children:e},t))})})]}),(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{type:"button",size:"icon",variant:o?"destructive":"ghost",className:"rounded-full h-9 w-9",onClick:()=>{u(!o)},children:o?(0,a.jsx)(I.A,{className:"h-5 w-5"}):(0,a.jsx)(_.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:o?"Cancel recording":"Voice message"})]})})]}),(0,a.jsx)("input",{type:"file",ref:m,className:"hidden",accept:"image/*",onChange:e=>{var t;(null==(t=e.target.files)?void 0:t[0])&&(s("/placeholder.svg?height=300&width=400"),m.current&&(m.current.value=""))}})]})}var $=s(49284),E=s(94402),V=s(59767);function R(e){let{message:t,isOwn:s,contactName:r,contactAvatar:l}=e,[n,i]=(0,x.useState)(!1),[d,c]=(0,x.useState)(!1);return(0,a.jsxs)("div",{className:(0,j.cn)("flex items-end gap-2 group",s?"flex-row-reverse":"flex-row"),children:[!s&&(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"relative w-7 h-7",children:(0,a.jsx)(A.default,{src:d?"/placeholder.svg?height=28&width=28":l,alt:r,width:28,height:28,className:"rounded-full object-cover mb-1 border border-border",onError:()=>c(!0)})})}),(0,a.jsxs)("div",{className:"max-w-[75%]",children:[(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,j.cn)("rounded-2xl px-4 py-2.5 shadow-sm",s?"bg-primary text-primary-foreground rounded-tr-none":"bg-muted text-foreground rounded-tl-none"),children:[t.text&&(0,a.jsx)("p",{className:"whitespace-pre-wrap break-words text-sm",children:t.text}),t.image&&(0,a.jsxs)("div",{className:"relative mt-1 overflow-hidden rounded-lg",children:[(0,a.jsx)("div",{className:(0,j.cn)("absolute inset-0 flex items-center justify-center bg-muted/50 z-10",n?"hidden":"block"),children:(0,a.jsx)("span",{className:"text-xs",children:"Loading image..."})}),(0,a.jsx)(A.default,{src:t.image||"/placeholder.svg",alt:"Shared image",width:300,height:200,className:"rounded-lg max-w-full object-contain",onLoad:()=>i(!0)})]})]})}),(0,a.jsx)(g.ZI,{side:s?"left":"right",className:"max-w-xs",children:(0,a.jsx)("p",{children:new Date(t.timestamp).toLocaleString([],{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})})]})}),(0,a.jsxs)("div",{className:(0,j.cn)("flex items-center gap-1 mt-1 text-[10px]",s?"justify-end pr-1":"justify-start pl-1",s?"text-primary-foreground/70":"text-muted-foreground"),children:[(0,a.jsx)("span",{children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s&&(e=>{switch(e){case"sent":return(0,a.jsx)($.A,{className:"h-3.5 w-3.5 text-muted-foreground"});case"delivered":return(0,a.jsx)(E.A,{className:"h-3.5 w-3.5 text-muted-foreground"});case"read":return(0,a.jsx)(V.A,{className:"h-3.5 w-3.5 text-primary"});default:return null}})(t.status)]})]})]})}function T(e){let{conversation:t,contact:s,onSendMessage:l,onSendImage:n}=e,d=(0,x.useRef)(null),[c,o]=(0,x.useState)(!1),[u,h]=(0,x.useState)(!1);(0,x.useEffect)(()=>{f()},[t.messages]);let f=()=>{var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth"})},S=(e=>{let t=[];return e.forEach(e=>{let s=new Date(e.timestamp).toLocaleDateString(),a=t.find(e=>e.date===s);a?a.messages.push(e):t.push({date:s,messages:[e]})}),t})(t.messages),M=e=>{let t=new Date(e),s=new Date,a=new Date(s);return(a.setDate(a.getDate()-1),t.toDateString()===s.toDateString())?"Today":t.toDateString()===a.toDateString()?"Yesterday":t.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric"})};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.default,{src:u?"/placeholder.svg?height=40&width=40":s.avatar,alt:s.name,width:40,height:40,className:"rounded-full object-cover",onError:()=>h(!0)}),(0,a.jsx)("span",{className:(0,j.cn)("absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-background",(e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-400"}})(s.status))})]}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"font-medium",children:s.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:(e=>{switch(e){case"online":return"Online";case"away":return"Away";default:return s.lastSeen?"Last seen ".concat(s.lastSeen):"Offline"}})(s.status)})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9",children:(0,a.jsx)(v.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:"Voice call"})]})}),(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9",children:(0,a.jsx)(y.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:"Video call"})]})}),(0,a.jsx)(g.TooltipProvider,{children:(0,a.jsxs)(g.m_,{children:[(0,a.jsx)(g.k$,{asChild:!0,children:(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})}),(0,a.jsx)(g.ZI,{children:"Search in conversation"})]})}),(0,a.jsxs)(C.rI,{children:[(0,a.jsx)(C.ty,{children:(0,a.jsx)(N.A,{className:"h-5 w-5"})}),(0,a.jsxs)(C.SQ,{children:[(0,a.jsxs)(C._2,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"size-4"}),(0,a.jsx)("span",{children:"Add to group"})]}),(0,a.jsxs)(C._2,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.A,{className:"size-4"}),(0,a.jsx)("span",{children:"View profile"})]}),(0,a.jsxs)(C._2,{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"size-4"}),(0,a.jsx)("span",{children:"Archive chat"})]}),(0,a.jsxs)(C._2,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.A,{className:"size-4"}),(0,a.jsx)("span",{children:"Delete chat"})]})]})]})]})]}),(0,a.jsx)(p.F,{className:"flex-1 p-4 bg-gradient-to-b from-muted/30 to-background",children:(0,a.jsxs)("div",{className:"space-y-6",children:[S.map((e,t)=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("span",{className:"text-xs bg-muted/80 px-3 py-1 rounded-full text-muted-foreground font-medium shadow-sm",children:M(e.date)})}),e.messages.map(e=>(0,a.jsx)(R,{message:e,isOwn:"current-user"===e.senderId,contactName:s.name,contactAvatar:s.avatar},e.id))]},t)),(0,a.jsx)("div",{ref:d})]})}),(0,a.jsx)("div",{className:"p-4 border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsx)(O,{onSendMessage:l,onSendImage:n})})]})}var P=s(94032),Z=s(1669),U=s(46276);function q(e){let t,{contacts:s,conversations:n,activeConversationId:d,onConversationSelect:c,onNewConversation:o}=e,[u,m]=(0,x.useState)("all"),[f,p]=(0,x.useState)({}),[g,v]=(0,x.useState)(!1),[y,N]=(0,x.useState)(""),b=(t=[...n],"online"===u?t=t.filter(e=>{let t=s.find(t=>t.id===e.contactId);return t&&"online"===t.status}):"unread"===u&&(t=t.filter(e=>e.unread>0)),t),w=s.filter(e=>!n.some(t=>t.contactId===e.id)).filter(e=>e.name.toLowerCase().includes(y.toLowerCase())),k=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-400"}},C=e=>{let t=new Date(e),s=Math.floor((new Date().getTime()-t.getTime())/864e5);return 0===s?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):1===s?"Yesterday":s<7?t.toLocaleDateString([],{weekday:"short"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},S=e=>{o&&(o(e),v(!1),N(""))};return(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"p-2 border-b",children:(0,a.jsx)(P.tU,{defaultValue:"all",className:"w-full",onValueChange:e=>m(e),children:(0,a.jsxs)(P.j7,{className:"w-full grid grid-cols-3",children:[(0,a.jsx)(P.Xi,{value:"all",className:"rounded-full",children:"All"}),(0,a.jsx)(P.Xi,{value:"online",className:"rounded-full",children:"Online"}),(0,a.jsx)(P.Xi,{value:"unread",className:"rounded-full",children:"Unread"})]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:"Conversations"}),(0,a.jsx)("div",{className:"flex space-x-1",children:(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-full hover:bg-muted",onClick:()=>v(!0),"aria-label":"New conversation",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:b.length>0?(0,a.jsx)("div",{children:b.map(e=>{let t=s.find(t=>t.id===e.contactId);return t?(0,a.jsxs)("div",{className:(0,j.cn)("flex items-center p-3 cursor-pointer transition-colors",d===e.id?"bg-accent text-accent-foreground":"hover:bg-muted/50",e.unread>0&&d!==e.id?"bg-muted/30":""),onClick:()=>c(e.id),children:[(0,a.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,a.jsx)(A.default,{src:f[t.id]?"/placeholder.svg?height=48&width=48":t.avatar,alt:t.name,width:48,height:48,className:"rounded-full object-cover border border-border",onError:()=>p(e=>({...e,[t.id]:!0}))}),(0,a.jsx)("span",{className:(0,j.cn)("absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-background",k(t.status))})]}),(0,a.jsxs)("div",{className:"ml-3 flex-1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h4",{className:(0,j.cn)("font-medium truncate",e.unread>0&&d!==e.id?"font-semibold":""),children:t.name}),e.lastMessage&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:C(e.lastMessage.timestamp)})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-0.5",children:[e.lastMessage&&(0,a.jsx)("p",{className:(0,j.cn)("text-sm truncate max-w-[160px]",d===e.id?"text-accent-foreground/80":"text-muted-foreground",e.unread>0&&d!==e.id?"font-medium text-foreground":""),children:e.lastMessage.text}),e.unread>0&&(0,a.jsx)(Z.E,{variant:"default",className:"ml-2 rounded-full px-1.5 min-w-[20px] h-5",children:e.unread})]})]})]},e.id):null})}):(0,a.jsxs)("div",{className:"p-4 text-center text-muted-foreground",children:[(0,a.jsx)("p",{children:"No conversations found"}),(0,a.jsxs)(r.$,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>v(!0),children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Start new chat"]})]})}),(0,a.jsx)(U.lG,{open:g,onOpenChange:v,children:(0,a.jsxs)(U.Cf,{className:"sm:max-w-md",children:[(0,a.jsx)(U.c7,{children:(0,a.jsx)(U.L3,{children:"New Conversation"})}),(0,a.jsxs)("div",{className:"space-y-4 py-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(l.p,{type:"search",placeholder:"Search contacts...",className:"pl-8",value:y,onChange:e=>N(e.target.value)})]}),(0,a.jsx)("div",{className:"max-h-[300px] overflow-y-auto space-y-1",children:w.length>0?w.map(e=>(0,a.jsxs)("div",{className:"flex items-center p-2 hover:bg-muted rounded-md cursor-pointer",onClick:()=>S(e.id),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(A.default,{src:f[e.id]?"/placeholder.svg?height=40&width=40":e.avatar,alt:e.name,width:40,height:40,className:"rounded-full object-cover",onError:()=>p(t=>({...t,[e.id]:!0}))}),(0,a.jsx)("span",{className:(0,j.cn)("absolute bottom-0 right-0 w-2.5 h-2.5 rounded-full border-2 border-background",k(e.status))})]}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"online"===e.status?"Online":e.lastSeen?"Last seen ".concat(e.lastSeen):"Offline"})]})]},e.id)):(0,a.jsx)("p",{className:"text-center text-muted-foreground py-4",children:"No contacts available"})})]}),(0,a.jsx)(U.Es,{children:(0,a.jsx)(r.$,{variant:"outline",onClick:()=>v(!1),children:"Cancel"})})]})})]})}function H(e){let{trigger:t,children:s,align:r="left",className:l}=e,[n,i]=(0,x.useState)(!1),d=(0,x.useRef)(null);return(0,x.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.jsxs)("div",{className:"relative",ref:d,children:[(0,a.jsx)("div",{onClick:()=>i(!n),className:"cursor-pointer",children:t}),n&&(0,a.jsx)("div",{className:(0,j.cn)("absolute z-50 mt-2 min-w-[200px] rounded-md bg-popover p-1 shadow-md","animate-in fade-in-0 zoom-in-95","left"===r?"left-0":"right-0",l),children:s})]})}function K(e){let{children:t,onClick:s,destructive:r=!1,disabled:l=!1,className:n}=e;return(0,a.jsx)("div",{onClick:e=>{e.stopPropagation(),!l&&s&&s()},className:(0,j.cn)("flex cursor-pointer select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none","hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",r&&"text-destructive hover:text-destructive",l&&"pointer-events-none opacity-50",n),children:t})}function X(e){let{children:t,className:s}=e;return(0,a.jsx)("div",{className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",s),children:t})}function Y(e){let{className:t}=e;return(0,a.jsx)("div",{className:(0,j.cn)("my-1 h-px bg-muted",t)})}function F(){let[e,t]=(0,x.useState)(n.q1),[s,p]=(0,x.useState)(n.TZ),[g,j]=(0,x.useState)(s.length>0?s[0].id:null),[v,y]=(0,x.useState)(""),[N,b]=(0,x.useState)(!1),w=s.find(e=>e.id===g)||null,k=w?e.find(e=>e.id===w.contactId):null,A=e.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())),C=e=>{let t={id:"conv-".concat(Date.now()),contactId:e,messages:[],unread:0};p([...s,t]),j(t.id)};return(0,a.jsxs)("div",{className:"md:flex h-[calc(100vh-4rem)] overflow-y-auto bg-background",children:[(0,a.jsx)("button",{onClick:()=>b(!N),className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white rounded-md md:hidden",children:"Open Chat"}),(0,a.jsxs)("div",{className:"w-72 duration-300 xl:w-80 border-r flex flex-col max-md:absolute max-md:top-32 max-md:border-t max-md: left-0 max-md:h-full max-md:z-10 max-md:bg-background ".concat(N?"max-md:translate-x-0":"max-md:-translate-x-full"),children:[(0,a.jsxs)("div",{className:"p-4 border-b flex items-center justify-between ",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(i.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(l.p,{type:"search",placeholder:"Search contacts...",className:"pl-8 rounded-full",value:v,onChange:e=>y(e.target.value)})]}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsxs)(H,{trigger:(0,a.jsx)(r.$,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9 hover:bg-muted",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})}),align:"right",children:[(0,a.jsx)(X,{children:"Chat Settings"}),(0,a.jsx)(Y,{}),(0,a.jsxs)(K,{children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Profile"})]}),(0,a.jsxs)(K,{children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Notifications"})]}),(0,a.jsxs)(K,{children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Privacy"})]}),(0,a.jsx)(Y,{}),(0,a.jsxs)(K,{destructive:!0,children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Clear History"})]})]})})]}),(0,a.jsx)(q,{contacts:A,conversations:s,activeConversationId:g,onConversationSelect:e=>{j(e),p(t=>t.map(t=>t.id===e?{...t,unread:0,messages:t.messages.map(e=>({...e,status:"current-user"!==e.senderId?"read":e.status}))}:t))},onNewConversation:C})]}),(0,a.jsx)("div",{className:"flex-1 flex flex-col",children:w&&k?(0,a.jsx)(T,{conversation:w,contact:k,onSendMessage:e=>{if(!g)return;let t={id:"msg-".concat(Date.now()),senderId:"current-user",text:e,timestamp:new Date().toISOString(),status:"sent"};p(s=>s.map(s=>s.id===g?{...s,messages:[...s.messages,t],lastMessage:{text:e,timestamp:new Date().toISOString()}}:s)),setTimeout(()=>{let t={id:"msg-".concat(Date.now()+1),senderId:(null==w?void 0:w.contactId)||"",text:'This is an automated reply to: "'.concat(e,'"'),timestamp:new Date().toISOString(),status:"read"};p(e=>e.map(e=>e.id===g?{...e,messages:[...e.messages,t],lastMessage:{text:t.text||"",timestamp:t.timestamp}}:e))},2e3*Math.random()+1e3)},onSendImage:e=>{if(!g)return;let t={id:"msg-".concat(Date.now()),senderId:"current-user",image:e,timestamp:new Date().toISOString(),status:"sent"};p(e=>e.map(e=>e.id===g?{...e,messages:[...e.messages,t],lastMessage:{text:"Sent an image",timestamp:new Date().toISOString()}}:e))}}):(0,a.jsx)("div",{className:"flex h-full items-center justify-center bg-muted/20",children:(0,a.jsxs)("div",{className:"text-center max-w-md p-6 rounded-lg bg-background shadow-sm border",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(h.A,{className:"h-8 w-8 text-primary"})}),(0,a.jsx)("h3",{className:"text-xl font-medium mb-2",children:"Start a conversation"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Select a contact from the sidebar or start a new chat to begin messaging"}),(0,a.jsxs)(r.$,{onClick:()=>{let t=e.find(e=>!s.some(t=>t.contactId===e.id));t?C(t.id):f.o.success("No available contacts to start a new conversation with.")},children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"New conversation"]})]})})})]})}},64730:(e,t,s)=>{Promise.resolve().then(s.bind(s,64362))},75471:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},82455:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},85409:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},85963:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},94022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},94032:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>c,av:()=>o,j7:()=>d,tU:()=>i});var a=s(66384),r=s(99643),l=s(16636),n=s(35515);let i=r.bL,d=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...l})});d.displayName=r.B8.displayName;let c=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...l})});c.displayName=r.l9.displayName;let o=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(r.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...l})});o.displayName=r.UC.displayName},94402:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},98268:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]])},98530:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(97492).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[7285,7767,9908,107,4377,2309,4367,432,8565,7180,9070,4537,5168,9309,951,7358],()=>t(64730)),_N_E=e.O()}]);